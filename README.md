Вариант №19 

Задание №1 

Разработать эмулятор для языка оболочки ОС. Необходимо сделать работу 
эмулятора как можно более похожей на сеанс shell в UNIX-подобной ОС. 
Эмулятор должен запускаться из реальной командной строки, а файл с 
виртуальной файловой системой не нужно распаковывать у пользователя. 
Эмулятор принимает образ виртуальной файловой системы в виде файла формата 
zip. Эмулятор должен работать в режиме CLI. 
Конфигурационный файл имеет формат xml и содержит: 

• Путь к архиву виртуальной файловой системы. 

• Путь к лог-файлу. 

Лог-файл имеет формат xml и содержит все действия во время последнего 
сеанса работы с эмулятором. Для каждого действия указаны дата и время. 
Необходимо поддержать в эмуляторе команды ls, cd и exit, а также 
следующие команды: 

1. pwd. 
2. uptime.
   
Все функции эмулятора должны быть покрыты тестами, а для каждой из 
поддерживаемых команд необходимо написать 3 теста. 

read_config(path):
Назначение: Читает конфигурационный XML-файл и извлекает пути к VFS и лог-файлу.

Параметры: path (str): Путь к XML-файлу конфигурации. 

Возвращает: tuple: Кортеж, содержащий пути к VFS (str) и лог-файлу (str). Возвращает None, если файл не найден или произошла ошибка парсинга.


VirtualFileSystem.__init__(self, zip_path): 
Назначение: Инициализирует виртуальную файловую систему из ZIP-архива. 

Параметры: self: Ссылка на экземпляр класса. zip_path (str): Путь к ZIP-архиву, содержащему виртуальную файловую систему. 

Возвращает: None



VirtualFileSystem.extract_zip(self, zip_path): 
Назначение: Распаковывает ZIP-архив в корневую директорию виртуальной файловой системы. 

Параметры: self: Ссылка на экземпляр класса. zip_path (str): Путь к ZIP-архиву. 

Возвращает: None



VirtualFileSystem.list_directory(self): 
Назначение: Возвращает список файлов и директорий в текущей директории. 

Параметры: self: Ссылка на экземпляр класса. 

Возвращает: str: Строка, содержащая список файлов и директорий с информацией о размере и времени последнего изменения. Каждая запись в списке на новой строке.


VirtualFileSystem.change_directory(self, path): 

Назначение: Изменяет текущую директорию.

Параметры: self: Ссылка на экземпляр класса. path (str): Путь к новой директории (относительный к текущей). Может быть ‘..’ для перехода на уровень вверх. 

Возвращает: None. Поднимает FileNotFoundError, если директория не найдена.


VirtualFileSystem.get_relative_path(self): 

Назначение: Возвращает относительный путь к текущей директории от корневой. 

Параметры: self: Ссылка на экземпляр класса. 

Возвращает: str: Относительный путь.


VirtualFileSystem.read_file(self, file_name): 

Назначение: Читает содержимое файла. 

Параметры: self: Ссылка на экземпляр класса. file_name (str): Имя файла. Возвращает: list: Список строк, содержащих содержимое файла. 

Возвращает строку с ошибкой, если файл не найден или произошла ошибка чтения.


VirtualFileSystem.move(self, path_A, path_B): 
Назначение: Перемещает файл или директорию. 

Параметры: self: Ссылка на экземпляр класса. path_A (str): Путь к файлу или директории, которую нужно переместить. path_B (str): Путь к новому местоположению. 

Возвращает: None. Поднимает FileNotFoundError, если файл или директория не найдены.


ls(vfs): 
Назначение: Выводит список файлов и директорий в текущей директории VFS. 

Параметры: vfs (VirtualFileSystem): Объект VirtualFileSystem. 

Возвращает: str: Список файлов и директорий или сообщение об ошибке.


cd(vfs, path): 
Назначение: Изменяет текущую директорию в VFS. 

Параметры: vfs (VirtualFileSystem): Объект VirtualFileSystem. path (str): Путь к новой директории. 

Возвращает: str: Сообщение об успешном изменении директории или сообщение об ошибке (или поднимает исключение).


pwd(vfs): 
Назначение: Выводит текущий путь в VFS. 

Параметры: vfs (VirtualFileSystem): Объект VirtualFileSystem. 

Возвращает: str: Текущий путь.


uptime(): 
Назначение: Возвращает время работы эмулятора. 

Параметры: None 

Возвращает: str: Время работы в секундах.
